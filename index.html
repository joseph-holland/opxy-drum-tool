<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>unofficial OP-XY tools</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap JS (for tabs) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Geometric/Monospaced Font -->
  <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:400,700|Montserrat:400,700&display=swap" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container py-4">
    <div class="app-header text-center mb-4">
      unofficial OP-XY tools
    </div>
    <ul class="nav nav-tabs justify-content-center mb-4" id="toolTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="drum-tab" data-bs-toggle="tab" data-bs-target="#drum" type="button" role="tab" aria-controls="drum" aria-selected="true">
          drum
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="multi-tab" data-bs-toggle="tab" data-bs-target="#multi" type="button" role="tab" aria-controls="multi" aria-selected="false">
          multisample
        </button>
      </li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane fade show active" id="drum" role="tabpanel" aria-labelledby="drum-tab">
        <div class="section-block">
          <h5 class="mb-3" data-bs-toggle="collapse" data-bs-target="#drumHowToUseCollapse" aria-expanded="true" aria-controls="drumHowToUseCollapse" style="cursor:pointer;">
            how to use <i class="fa fa-chevron-down float-end" id="drumHowToUseChevron"></i>
          </h5>
          <div class="collapse show" id="drumHowToUseCollapse">
            <p>drag and drop samples onto each row or click the search button to browse. use your keyboard to demo each sample. when finished, press <b>generate patch</b> to download a zip file containing the preset. unzip into a folder named  <b>presetname.preset</b>. copy to your OP-XY via usb and drop into the presets folder (create a subfolder called 'drum' or any custom name to arrange your custom drum presets.</p>
          </div>
        </div>
        <div class="section-block">
          <h5 class="mb-3" data-bs-toggle="collapse" data-bs-target="#drumSettingsCollapse" aria-expanded="true" aria-controls="drumSettingsCollapse" style="cursor:pointer;">
            settings <i class="fa fa-chevron-down float-end" id="drumSettingsChevron"></i>
          </h5>
          <div class="collapse show" id="drumSettingsCollapse">
          <!-- Drum tool settings -->
          <label for="preset-name-drum" class="form-label">preset name</label>
          <input id="preset-name-drum" type="text" class="form-control mb-2" value="my preset name">
          <label for="sample-rate-drum" class="form-label">sample rate</label>
          <select class="form-select mb-2" id="sample-rate-drum">
            <option value="0">keep original</option>
            <option value="1">re-encode 11kHz</option>
            <option value="2">re-encode 22kHz</option>
            <option value="3">re-encode 44kHz</option>
          </select>
          <div class="form-text mb-2">for best results, set the sample rate to 22kHz or lower. if notes are missing during playback, try reducing the sample rate further.</div>
          <!-- Advanced Preset Settings Modal Trigger Button -->
          <button class="btn btn-secondary btn-sm mt-2" data-bs-toggle="modal" data-bs-target="#preset-advanced-modal" id="open-preset-advanced-modal">
            <i class="fa fa-sliders-h me-1"></i>advanced preset settings
          </button>

          <!-- Advanced Preset Settings Modal -->
          <div class="modal fade" id="preset-advanced-modal" tabindex="-1" aria-labelledby="preset-advanced-modal-label" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="preset-advanced-modal-label">advanced preset settings</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="mb-3 d-flex align-items-center">
                    <label for="preset-playmode" class="form-label mb-0 me-2" style="min-width:110px;">play mode</label>
                    <select class="form-select" id="preset-playmode" style="max-width:220px;">
                      <option value="poly">poly</option>
                      <option value="mono">mono</option>
                      <option value="legato">legato</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label for="preset-transpose" class="form-label">transpose (semitones)</label>
                    <div class="d-flex align-items-center">
                      <input type="range" class="form-range" id="preset-transpose" min="-36" max="36" value="0" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                      <input type="number" class="form-control form-control-sm" id="preset-transpose-number" min="-36" max="36" value="0" style="width:80px;flex-shrink:0;">
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="preset-velocity-sensitivity" class="form-label">velocity sensitivity (%)</label>
                    <div class="d-flex align-items-center">
                      <input type="range" class="form-range" id="preset-velocity-sensitivity" min="0" max="100" value="15" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                      <input type="number" class="form-control form-control-sm" id="preset-velocity-sensitivity-number" min="0" max="100" value="15" style="width:80px;flex-shrink:0;">
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="preset-volume" class="form-label">volume (%)</label>
                    <div class="d-flex align-items-center">
                      <input type="range" class="form-range" id="preset-volume" min="0" max="100" value="80" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                      <input type="number" class="form-control form-control-sm" id="preset-volume-number" min="0" max="100" value="80" style="width:80px;flex-shrink:0;">
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="preset-width" class="form-label">stereo width (%)</label>
                    <div class="d-flex align-items-center">
                      <input type="range" class="form-range" id="preset-width" min="0" max="100" value="0" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                      <input type="number" class="form-control form-control-sm" id="preset-width-number" min="0" max="100" value="0" style="width:80px;flex-shrink:0;">
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">cancel</button>
                  <button type="button" class="btn btn-dark btn-sm" id="save-preset-advanced-settings"><i class="fa fa-save me-1"></i>save</button>
                </div>
              </div>
            </div>
          </div>
          </div>
        </div>
        <div class="section-block">
          <button class="accent-btn mt-3">generate patch</button>
        </div>
        <div class="section-block">
          <h5 class="mb-3">demo samples</h5>
          <div class="mb-2">use the virtual keys below to demo each sample. click with cursor or use your keyboard.</div>
          <div class="keyboard-grid-container mb-4 position-relative" id="drum-keyboard">
            <!-- Top row (offset like a real keyboard) -->
            <div class="key-wrapper key-w">
              <div class="kbd bg-light border rounded kbd-w"><span class="osk-circle"></span><span class="osk-letter">W</span></div>
              <div class="small text-muted">KD2</div>
            </div>
            <div class="key-wrapper key-e">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">E</span></div>
              <div class="small text-muted">SD2</div>
            </div>
            <div class="key-wrapper key-r">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">R</span></div>
              <div class="small text-muted">CP</div>
            </div>
            <!-- T is omitted to simulate the piano gap -->
            <div class="key-wrapper key-y">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">Y</span></div>
              <div class="small text-muted">CH</div>
            </div>
            <div class="key-wrapper key-u">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">U</span></div>
              <div class="small text-muted">OH</div>
            </div>
            <!-- Bottom row -->
            <div class="key-wrapper key-a">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">A</span></div>
              <div class="small text-muted">KD1</div>
            </div>
            <div class="key-wrapper key-s">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">S</span></div>
              <div class="small text-muted">SD1</div>
            </div>
            <div class="key-wrapper key-d">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">D</span></div>
              <div class="small text-muted">RIM</div>
            </div>
            <div class="key-wrapper key-f">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">F</span></div>
              <div class="small text-muted">TB</div>
            </div>
            <div class="key-wrapper key-g">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">G</span></div>
              <div class="small text-muted">SH</div>
            </div>
            <div class="key-wrapper key-h">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">H</span></div>
              <div class="small text-muted">CL</div>
            </div>
            <div class="key-wrapper key-j">
              <div class="kbd bg-light border rounded"><span class="osk-circle"></span><span class="osk-letter">J</span></div>
              <div class="small text-muted">CAB</div>
            </div>
          </div>
          <div class="octave-controls">
            <div class="text-center">
              <div class="kbd bg-light border rounded mb-1 octave-kbd" tabindex="0" role="button"><span class="osk-circle"></span><span class="osk-letter">z</span></div>
              <div class="small text-muted">octave down</div>
            </div>
            <div class="text-center">
              <div class="kbd bg-light border rounded mb-1 octave-kbd" tabindex="0" role="button"><span class="osk-circle"></span><span class="osk-letter">x</span></div>
              <div class="small text-muted">octave up</div>
            </div>
          </div>
        </div>
        <div class="section-block">
          <h5 class="mb-3">load sample files</h5>
          <form id="drum-sample-form">
            <div class="table-responsive">
              <table class="table align-middle table-sm mb-0">
                <thead>
                  <tr>
                    <th>drum key</th>
                    <th>sample file</th>
                    <th class="text-right" style="text-align:right;">actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>kick</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-1"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-1" style="display:none;"><div class="small text-muted" id="sample-name-1"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-1" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-1" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-1" data-sample-idx="1"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>kick alternative</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-2"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-2" style="display:none;"><div class="small text-muted" id="sample-name-2"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-2" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-2" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-2" data-sample-idx="2"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>snare</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-3"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-3" style="display:none;"><div class="small text-muted" id="sample-name-3"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-3" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-3" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-3" data-sample-idx="3"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>snare alternative</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-4"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-4" style="display:none;"><div class="small text-muted" id="sample-name-4"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-4" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-4" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-4" data-sample-idx="4"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>rim</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-5"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-5" style="display:none;"><div class="small text-muted" id="sample-name-5"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-5" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-5" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-5" data-sample-idx="5"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>hand clap</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-6"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-6" style="display:none;"><div class="small text-muted" id="sample-name-6"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-6" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-6" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-6" data-sample-idx="6"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>tambourine</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-7"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-7" style="display:none;"><div class="small text-muted" id="sample-name-7"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-7" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-7" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-7" data-sample-idx="7"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>shaker</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-8"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-8" style="display:none;"><div class="small text-muted" id="sample-name-8"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-8" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-8" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-8" data-sample-idx="8"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>closed hi-hat</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-9"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-9" style="display:none;"><div class="small text-muted" id="sample-name-9"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-9" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-9" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-9" data-sample-idx="9"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>clave</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-10"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-10" style="display:none;"><div class="small text-muted" id="sample-name-10"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-10" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-10" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-10" data-sample-idx="10"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>open hi-hat</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-11"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-11" style="display:none;"><div class="small text-muted" id="sample-name-11"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-11" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-11" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-11" data-sample-idx="11"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>cabasa</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-12"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-12" style="display:none;"><div class="small text-muted" id="sample-name-12"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-12" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-12" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-12" data-sample-idx="12"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>low tom</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-13"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-13" style="display:none;"><div class="small text-muted" id="sample-name-13"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-13" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-13" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-13" data-sample-idx="13"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>ride cymbal</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-14"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-14" style="display:none;"><div class="small text-muted" id="sample-name-14"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-14" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-14" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-14" data-sample-idx="14"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>mid-tom</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-15"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-15" style="display:none;"><div class="small text-muted" id="sample-name-15"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-15" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-15" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-15" data-sample-idx="15"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>crash cymbal</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-16"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-16" style="display:none;"><div class="small text-muted" id="sample-name-16"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-16" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-16" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-16" data-sample-idx="16"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>hi-tom</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-17"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-17" style="display:none;"><div class="small text-muted" id="sample-name-17"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-17" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-17" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-17" data-sample-idx="17"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>cowbell</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-18"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-18" style="display:none;"><div class="small text-muted" id="sample-name-18"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-18" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-18" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-18" data-sample-idx="18"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>triangle</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-19"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-19" style="display:none;"><div class="small text-muted" id="sample-name-19"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-19" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-19" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-19" data-sample-idx="19"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>low tom</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-20"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-20" style="display:none;"><div class="small text-muted" id="sample-name-20"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-20" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-20" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-20" data-sample-idx="20"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>low conga</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-21"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-21" style="display:none;"><div class="small text-muted" id="sample-name-21"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-21" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-21" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-21" data-sample-idx="21"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>clave</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-22"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-22" style="display:none;"><div class="small text-muted" id="sample-name-22"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-22" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-22" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-22" data-sample-idx="22"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>hi-conga</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-23"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-23" style="display:none;"><div class="small text-muted" id="sample-name-23"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-23" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-23" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-23" data-sample-idx="23"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>guiro</td>
                    <td><div class="input-group input-group-sm sample-file-col"><label class="input-group-text" for="sample-24"><i class="fa fa-search"></i></label><input type="file" accept=".wav" class="form-control form-control-sm" id="sample-24" style="display:none;"><div class="small text-muted" id="sample-name-24"></div></div></td>
                    <td class="text-end">
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="play-24" disabled><i class="bi bi-play-fill"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-24" disabled><i class="bi bi-x-lg"></i></button>
                      <button type="button" class="btn btn-outline-secondary btn-sm advanced-btn" id="adv-24" data-sample-idx="24"><i class="fa fa-cog" title="Sample options"></i></button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </form>
        </div>
      </div>
      <div class="tab-pane fade" id="multi" role="tabpanel" aria-labelledby="multi-tab">
        <div class="section-block">
          <h5 class="mb-3" data-bs-toggle="collapse" data-bs-target="#howToUseCollapse" aria-expanded="true" aria-controls="howToUseCollapse" style="cursor:pointer;">
            how to use <i class="fa fa-chevron-down float-end" id="howToUseChevron"></i>
          </h5>
          <div class="collapse show" id="howToUseCollapse">
            <p>drag and drop samples below. samples are auto-assigned to notes based on their names. click a note name to change it using a midi number (e.g., 60 for middle c) or note name (e.g., C3, G#5, Bb2). all samples must have a note assigned! when done, click <b>generate patch</b> to download a zip file containing the preset. unzip into a folder named <b>presetname.preset</b>. copy to your OP-XY via usb and drop into the presets folder (or create a subfolder called 'lead' 'pad' or any custom name to arrange your custom multisample presets.</p>
          </div>
          <h5 class="mb-3" data-bs-toggle="collapse" data-bs-target="#sampleReqCollapse" aria-expanded="true" aria-controls="sampleReqCollapse" style="cursor:pointer;">
            sample requirements <i class="fa fa-chevron-down float-end" id="sampleReqChevron"></i>
          </h5>
          <div class="collapse show" id="sampleReqCollapse">
            <ul class="mb-0">
              <li>20 seconds max per sample</li>
              <li>24 samples max per multisample preset</li>
              <li>multiple velocities are not supported</li>
              <li>file names should end with either a midi note number (0-127) or a note name like C#3</li>
            </ul>
            <p class="small text-muted mt-2 mb-0">
              <strong>naming examples:</strong> "my awesome sample-60.wav", "my cool sound C3.wav", "sickfuzz-G#4-127.wav"
            </p>
          </div>
        </div>
        <div class="section-block">
          <h5 class="mb-3" data-bs-toggle="collapse" data-bs-target="#settingsCollapse" aria-expanded="true" aria-controls="settingsCollapse" style="cursor:pointer;">
            settings <i class="fa fa-chevron-down float-end" id="settingsChevron"></i>
          </h5>
          <div class="collapse show" id="settingsCollapse">
            <label for="preset-name-multi" class="form-label">preset name</label>
            <input id="preset-name-multi" type="text" class="form-control mb-2" value="my preset name">
            <!-- Removed loop enabled and preset gain controls, now only in advanced modal -->
            <label for="sample-rate-multi" class="form-label">sample rate</label>
            <select class="form-select mb-2" id="sample-rate-multi">
              <option value="0">keep original</option>
              <option value="1">re-encode 11kHz</option>
              <option value="2">re-encode 22kHz</option>
              <option value="3">re-encode 44kHz</option>
            </select>
            <div class="form-text mb-2">for best results, set the sample rate to 22khz or lower. if notes are missing during playback, try reducing the sample rate further.</div>
            <!-- Advanced Preset Settings Modal Trigger Button -->
            <button class="btn btn-secondary btn-sm mt-2" data-bs-toggle="modal" data-bs-target="#multisample-preset-advanced-modal" id="open-multisample-preset-advanced-modal">
              <i class="fa fa-sliders-h me-1"></i>advanced preset settings
            </button>
          </div>

          <!-- Advanced Preset Settings Modal for Multisample -->
          <div class="modal fade" id="multisample-preset-advanced-modal" tabindex="-1" aria-labelledby="multisample-preset-advanced-modal-label" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="multisample-preset-advanced-modal-label">advanced preset settings</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <!-- Engine Settings -->
                  <div class="mb-3 d-flex align-items-center">
                    <label for="multisample-preset-playmode" class="form-label mb-0 me-2" style="min-width:110px;">play mode</label>
                    <select class="form-select" id="multisample-preset-playmode" style="max-width:220px;">
                      <option value="poly">poly</option>
                      <option value="mono">mono</option>
                      <option value="legato">legato</option>
                    </select>
                  </div>
                  <div class="mb-3 d-flex align-items-center">
                    <label class="form-label mb-0 me-2" style="min-width:110px;">loop samples</label>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="multisample-preset-loop-enabled">
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="multisample-preset-velocity-sensitivity" class="form-label">velocity sensitivity (%)</label>
                    <div class="d-flex align-items-center">
                      <input type="range" class="form-range" id="multisample-preset-velocity-sensitivity" min="0" max="100" value="31" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                      <input type="number" class="form-control form-control-sm" id="multisample-preset-velocity-sensitivity-number" min="0" max="100" value="31" style="width:80px;flex-shrink:0;">
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="multisample-preset-volume" class="form-label">volume (%)</label>
                    <div class="d-flex align-items-center">
                      <input type="range" class="form-range" id="multisample-preset-volume" min="0" max="100" value="50" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                      <input type="number" class="form-control form-control-sm" id="multisample-preset-volume-number" min="0" max="100" value="50" style="width:80px;flex-shrink:0;">
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="multisample-preset-width" class="form-label">stereo width (%)</label>
                    <div class="d-flex align-items-center">
                      <input type="range" class="form-range" id="multisample-preset-width" min="0" max="100" value="9" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                      <input type="number" class="form-control form-control-sm" id="multisample-preset-width-number" min="0" max="100" value="9" style="width:80px;flex-shrink:0;">
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="multisample-preset-highpass" class="form-label">high pass filter (%)</label>
                    <div class="d-flex align-items-center">
                      <input type="range" class="form-range" id="multisample-preset-highpass" min="0" max="100" value="0" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                      <input type="number" class="form-control form-control-sm" id="multisample-preset-highpass-number" min="0" max="100" value="0" style="width:80px;flex-shrink:0;">
                    </div>
                  </div>
                  <!-- Portamento Settings (no header) -->
                  <div class="mb-3 d-flex align-items-center">
                    <label for="multisample-preset-portamento-type" class="form-label mb-0 me-2" style="min-width:110px;">portamento type</label>
                    <select class="form-select" id="multisample-preset-portamento-type" style="max-width:220px;">
                      <option value="32767">linear</option>
                      <option value="12779">exponential</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label for="multisample-preset-portamento-amount" class="form-label">portamento amount (%)</label>
                    <div class="d-flex align-items-center">
                      <input type="range" class="form-range" id="multisample-preset-portamento-amount" min="0" max="100" value="0" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                      <input type="number" class="form-control form-control-sm" id="multisample-preset-portamento-amount-number" min="0" max="100" value="0" style="width:80px;flex-shrink:0;">
                    </div>
                  </div>
                  <!-- Tuning Settings (no header) -->
                  <div class="mb-3 d-flex align-items-center">
                    <label for="multisample-preset-tuning-root" class="form-label mb-0 me-2" style="min-width:110px;">tuning root</label>
                    <select class="form-select" id="multisample-preset-tuning-root" style="max-width:220px;">
                      <option value="0">C</option>
                      <option value="2730">C#</option>
                      <option value="5461">D</option>
                      <option value="8192">D#</option>
                      <option value="10922">E</option>
                      <option value="13653">F</option>
                      <option value="16384">F#</option>
                      <option value="19114">G</option>
                      <option value="21845">G#</option>
                      <option value="24575">A</option>
                      <option value="27306">A#</option>
                      <option value="30037">B</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label for="multisample-preset-transpose" class="form-label">transpose (semitones)</label>
                    <div class="d-flex align-items-center">
                      <input type="range" class="form-range" id="multisample-preset-transpose" min="-36" max="36" value="0" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                      <input type="number" class="form-control form-control-sm" id="multisample-preset-transpose-number" min="-36" max="36" value="0" style="width:80px;flex-shrink:0;">
                    </div>
                  </div>
                  <!-- Envelope Settings (no header) -->
                  <div class="row">
                    <div class="col-md-6">
                      <h6 class="mb-2 text-muted">amp envelope</h6>
                      <div class="mb-2">
                        <label for="multisample-amp-attack" class="form-label">attack (%)</label>
                        <div class="d-flex align-items-center">
                          <input type="range" class="form-range" id="multisample-amp-attack" min="0" max="100" value="0" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                          <input type="number" class="form-control form-control-sm" id="multisample-amp-attack-number" min="0" max="100" value="0" style="width:80px;flex-shrink:0;">
                        </div>
                      </div>
                      <div class="mb-2">
                        <label for="multisample-amp-decay" class="form-label">decay (%)</label>
                        <div class="d-flex align-items-center">
                          <input type="range" class="form-range" id="multisample-amp-decay" min="0" max="100" value="0" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                          <input type="number" class="form-control form-control-sm" id="multisample-amp-decay-number" min="0" max="100" value="0" style="width:80px;flex-shrink:0;">
                        </div>
                      </div>
                      <div class="mb-2">
                        <label for="multisample-amp-sustain" class="form-label">sustain (%)</label>
                        <div class="d-flex align-items-center">
                          <input type="range" class="form-range" id="multisample-amp-sustain" min="0" max="100" value="0" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                          <input type="number" class="form-control form-control-sm" id="multisample-amp-sustain-number" min="0" max="100" value="0" style="width:80px;flex-shrink:0;">
                        </div>
                      </div>
                      <div class="mb-2">
                        <label for="multisample-amp-release" class="form-label">release (%)</label>
                        <div class="d-flex align-items-center">
                          <input type="range" class="form-range" id="multisample-amp-release" min="0" max="100" value="100" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                          <input type="number" class="form-control form-control-sm" id="multisample-amp-release-number" min="0" max="100" value="100" style="width:80px;flex-shrink:0;">
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <h6 class="mb-2 text-muted">filter envelope</h6>
                      <div class="mb-2">
                        <label for="multisample-filter-attack" class="form-label">attack (%)</label>
                        <div class="d-flex align-items-center">
                          <input type="range" class="form-range" id="multisample-filter-attack" min="0" max="100" value="100" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                          <input type="number" class="form-control form-control-sm" id="multisample-filter-attack-number" min="0" max="100" value="100" style="width:80px;flex-shrink:0;">
                        </div>
                      </div>
                      <div class="mb-2">
                        <label for="multisample-filter-decay" class="form-label">decay (%)</label>
                        <div class="d-flex align-items-center">
                          <input type="range" class="form-range" id="multisample-filter-decay" min="0" max="100" value="100" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                          <input type="number" class="form-control form-control-sm" id="multisample-filter-decay-number" min="0" max="100" value="100" style="width:80px;flex-shrink:0;">
                        </div>
                      </div>
                      <div class="mb-2">
                        <label for="multisample-filter-sustain" class="form-label">sustain (%)</label>
                        <div class="d-flex align-items-center">
                          <input type="range" class="form-range" id="multisample-filter-sustain" min="0" max="100" value="100" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                          <input type="number" class="form-control form-control-sm" id="multisample-filter-sustain-number" min="0" max="100" value="100" style="width:80px;flex-shrink:0;">
                        </div>
                      </div>
                      <div class="mb-2">
                        <label for="multisample-filter-release" class="form-label">release (%)</label>
                        <div class="d-flex align-items-center">
                          <input type="range" class="form-range" id="multisample-filter-release" min="0" max="100" value="0" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
                          <input type="number" class="form-control form-control-sm" id="multisample-filter-release-number" min="0" max="100" value="0" style="width:80px;flex-shrink:0;">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">cancel</button>
                  <button type="button" class="btn btn-dark btn-sm" id="save-multisample-preset-advanced-settings"><i class="fa fa-save me-1"></i>save</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="section-block">
          <button class="accent-btn mt-2" id="generate-multisample-patch" disabled title="load at least one sample to enable">generate patch</button>
        </div>
        <div class="section-block">
          <h5 class="mb-3">samples</h5>
          <div class="mb-2">
            <label class="input-group-text" for="multisample-file-input" style="cursor:pointer;display:inline-flex;align-items:center;gap:0.5em;">
              <i class="fa fa-search"></i> browse
            </label>
            <input type="file" id="multisample-file-input" accept=".wav" multiple style="display:none;">
          </div>
          <div id="multisample-drop-area" class="drop-area position-relative">
            <div id="multisample-rows-container" class="multisample-rows"></div>
            <div id="multisample-drop-label" class="drop-label">drag samples here</div>
          </div>
        </div>
      </div>
    </div>
    <footer class="text-center disclaimer">
      OP-XY is a trademark of teenage engineering. this is an unofficial tool and is not affiliated with or endorsed by teenage engineering.<br>
      <a href="https://github.com/joseph-holland/opxy-tools" target="_blank" rel="noopener">View on GitHub</a><br>
      originally created by zeitgeese, forked from <a href="https://buba447.github.io/opxy-drum-tool/" target="_blank" rel="noopener">buba447/opxy-drum-tool</a>
    </footer>
  </div>

  <!-- Advanced Modal -->
  <div id="advanced-modal" class="modal fade" tabindex="-1" style="display:none;background:rgba(0,0,0,0.4);">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">sample options</h5>
        </div>
        <div class="modal-body">
            <div class="alert alert-info py-2 mb-3" style="font-size:0.97em; background:#e0e0e0; color:#222; border-color:#bbb;">
            tip: press <b>p</b> to demo the sample.
            </div>
          <div class="mb-3 d-flex align-items-center">
            <label class="form-label mb-0 me-2" style="min-width:90px;">playmode</label>
            <select class="form-select form-select-sm adv-playmode" style="width:auto;display:inline-block;max-width:350px;">
              <option value="oneshot">oneshot - play whole sample</option>
              <option value="group">mute group - choke when another sample plays</option>
              <option value="loop">loop - loop at sample end</option>
              <option value="gate">key - play while held</option>
            </select>
          </div>
          <div class="mb-3 d-flex align-items-center">
            <label class="form-label mb-0 me-2" style="min-width:90px;">playback direction</label>
            <button type="button" class="btn btn-secondary btn-sm adv-reverse ms-0" style="background:#444;color:#fff;border:none;min-width:90px;">
              <i class="fa fa-play"></i>
              <span class="adv-reverse-label ms-2">forward</span>
            </button>
          </div>
          <div class="mb-3">
            <label class="form-label">tuning (semitones)</label>
            <div class="d-flex align-items-center">
              <input type="range" class="form-range adv-tune-slider" min="-48" max="48" value="0" step="1" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
              <input type="number" class="form-control form-control-sm adv-tune" min="-48" max="48" value="0" style="width:80px;flex-shrink:0;">
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">gain (db)</label>
            <div class="d-flex align-items-center">
              <input type="range" class="form-range adv-gain-slider" min="-30" max="20" value="0" step="1" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
              <input type="number" class="form-control form-control-sm adv-gain" min="-30" max="20" value="0" style="width:80px;flex-shrink:0;">
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">pan</label>
            <div class="d-flex align-items-center">
              <input type="range" id="advancedPanSlider" class="form-range" min="-100" max="100" value="0" step="1" style="accent-color:#222;background:#fff;height:2.2em;border-radius:8px;outline:none;box-shadow:none;flex:1;margin-right:8px;">
              <input type="number" id="advancedPanNumber" class="form-control form-control-sm" min="-100" max="100" value="0" step="1" style="width:80px;flex-shrink:0;">
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">sample editor</label>
            <button type="button" class="btn btn-secondary btn-sm ms-2" id="zoom-btn" style="background:#444;color:#fff;border:none;"><i class="fa fa-search-plus"></i> zoom & edit</button>
            <div id="waveform-container-modal" style="height:60px;width:100%;background:#ececec;position:relative;"></div>
            <div class="d-flex align-items-center mt-2">
              <label class="me-2">start</label>
              <input type="number" class="form-control form-control-sm adv-sample-start" min="0" value="0" style="width:80px;">
              <label class="mx-2">end</label>
              <input type="number" class="form-control form-control-sm adv-sample-end" min="0" value="0" style="width:80px;">
              <span class="ms-2 small text-muted adv-sample-length"></span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary btn-sm adv-cancel" style="background:#888;color:#fff;border:none;">cancel</button>
          <button type="button" class="btn btn-secondary btn-sm adv-play-modal" style="background:#222;color:#fff;border:none;"><i class="fa fa-play"></i> play</button>
            <button type="button" class="btn btn-dark btn-sm adv-save" style="background:#000;color:#fff;border:none;">
            <i class="fa fa-save me-1"></i>save
            </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Zoom Modal -->
  <div class="modal fade" id="zoom-modal" tabindex="-1" aria-labelledby="zoom-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="zoom-modal-label">edit start & end points</h5>
        </div>
        <div class="modal-body">
          <div class="alert alert-info py-2 mb-3" style="font-size:0.97em; background:#e0e0e0; color:#222; border-color:#bbb;">
            tip: press <b>p</b> to demo the sample.
          </div>
          <canvas id="zoom-canvas" width="1100" height="200"></canvas>
          <div class="form-check mb-2 ms-2">
            <input class="form-check-input" type="checkbox" id="zero-crossing-snap" checked>
            <label class="form-check-label" for="zero-crossing-snap">
              snap to zero crossings
            </label>
          </div>
          <div class="row mt-2">
            <div class="col">
              <label for="zoom-start-point" class="form-label">start point</label>
              <div class="d-flex align-items-center">
                <input type="text" class="form-control" id="zoom-start-point">
                <span class="ms-2 badge bg-secondary" id="zoom-start-value">0.000</span>
              </div>
            </div>
            <div class="col">
              <label for="zoom-end-point" class="form-label">end point</label>
              <div class="d-flex align-items-center">
                <input type="text" class="form-control" id="zoom-end-point">
                <span class="ms-2 badge bg-secondary" id="zoom-end-value">0.000</span>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-sm" data-bs-dismiss="modal" style="background:#888;color:#fff;border:none;min-width:80px;height:38px;font-size:1rem;padding:6px 16px;">cancel</button>
          <button type="button" class="btn btn-sm" id="zoom-play-button" style="background:#222;color:#fff;border:none;min-width:80px;height:38px;font-size:1rem;padding:6px 16px;"> play</button>
          <button type="button" class="btn btn-sm" id="zoom-save-button" style="background:#000;color:#fff;border:none;min-width:80px;height:38px;font-size:1rem;padding:6px 16px;">done</button>
        </div>
      </div>
    </div>
  </div>

  <script src="lib/audio_tools.js"></script>
  <script src="lib/drum_sample_tool.js"></script>
  <script src="lib/multisample_tool.js"></script>
</body>
</html>
